<IfModule mod_ssl.c>
<VirtualHost _default_:4433>

    # ServerName localhost
    # ServerAlias localhost
    ServerAdmin dev@icarto.es

    DocumentRoot /var/www/utentes

    # Possible values include: debug, info, notice, warn, error, crit,
	# alert, emerg.
    LogLevel info
    ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined

    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>


    ## mod_wsgi ##
    WSGIApplicationGroup %{GLOBAL}
    WSGIPassAuthorization On
    WSGIDaemonProcess pyramid-ssl user=www-data group=www-data threads=4 \
                      python-path=/var/www/utentes/lib/python2.7/site-packages
    WSGIScriptAlias /utentes /var/www/utentes/utentes/production.wsgi

    Alias /utentes/static /var/www/utentes/static

    <Directory /var/www/utentes/utentes>
         WSGIProcessGroup pyramid-ssl
         Order allow,deny
         Allow from all
    </Directory>


	# SSL config
	SSLEngine On
	SSLCertificateFile /etc/ssl/crt/apache-cert.pem
	SSLCertificateKeyFile /etc/ssl/key/apache-key.pem

    AddOutputFilterByType DEFLATE application/json

</VirtualHost>
</IfModule>
